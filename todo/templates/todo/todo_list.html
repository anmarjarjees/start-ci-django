<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To Do</title>
</head>

<body>
    <h1>Things I need to do:</h1>
    <!-- We can render all the itmes keys from the context dictionary that we created inside the view function for this page  -->
    <!-- using the Django template syntax as we did with Flask -->
    {{ items }}
    <!-- 
        So bouble curly brackets are used with any template variable => { { } }
        while any other kinds of functionality like for loops, if condition, etc will use the curly brackets percentage sign => { % % }
     -->

    <!-- 
        The result will be:
        <QuerySet [<Item: Create Item Class>, <Item: Register Item Model>]>

        QuerySet is just like a list (array) thant we can loop through
        This list has two items as we have two objects (items) in our database

        We need to display them in a friendly way using for loop
     -->

    <table>
        {% for item in items %}
        <tr>
            <!-- The old simple code: -->
            <!-- 
            <td>{ { item.name } }</td>
            <td>{ { item.done } }</td> 
            -->
            <!-- The new code with if statement -->
            {% if item.done %}
            <!-- 
                Notice that <strike> is an abolete (deprecated) element!
                We should use <span> element with CSS instead
             -->
            <td><strike>{{ item.name}}</strike></td>
            {% else %}
            <td>{{ item.name }}</td>
            {% endif %}
            <td>
                <a href="/toggle/{{ item.id }}">
                    <button>Toggle</button>
                </a>
            </td>
            <td>
                <!-- 
                    href => URL named "edit" => added in urls.py file for ulrpatterns list with another path() method
                    After the url "/edit" => adding/appending the item's id which is automatically generated by Django

                    If you test the button in the browser, you will see the id numbers are being added to the end of the url, examples:
                    edit/1 (for the first todo item), edit/2 (for the second todo item), edit/3 (for the third todo item), etc...

                    But we need to add its url and view function otherwise we will get the error: Page not found (404)
                 -->
                <a href="/edit/{{ item.id }}">
                    <button>Edit</button>
                </a>
            </td>
            <td>
                <a href="/delete/{{ item.id }}">
                    <button>Delete</button>
                </a>
            </td>
        </tr>
        <!-- 
            One last thing, what happens if our database table is completely empty (no data at all)?
            We can use a special tag named "empty" before "endfor"
         -->
        {% empty %}
        <tr>
            <td>You have nothing to do.</td>
        </tr>
        {% endfor %}
    </table>
    <!-- adding / before add to make sure that we are starting at the root -->
    <a href="/add">Add an Item</a>
</body>

</html>